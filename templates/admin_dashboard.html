{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>Admin Dashboard</h1>
    <p>Welcome, {{ session.name }} - System Administration</p>
</div>

<div class="dashboard-cards">
    <div class="card">
        <div class="card-icon bg-primary">
            <i class="fas fa-users"></i>
        </div>
        <h3>{{ total_users }}</h3>
        <p>Total Users</p>
    </div>
    
    <div class="card">
        <div class="card-icon bg-success">
            <i class="fas fa-graduation-cap"></i>
        </div>
        <h3>{{ total_students }}</h3>
        <p>Students</p>
    </div>
    
    <div class="card">
        <div class="card-icon bg-warning">
            <i class="fas fa-chalkboard-teacher"></i>
        </div>
        <h3>{{ total_lecturers }}</h3>
        <p>Lecturers</p>
    </div>
    
    <div class="card">
        <div class="card-icon bg-danger">
            <i class="fas fa-book"></i>
        </div>
        <h3>{{ total_courses }}</h3>
        <p>Courses</p>
    </div>
    
    <div class="card">
        <div class="card-icon bg-info">
            <i class="fas fa-calendar-alt"></i>
        </div>
        <h3>{{ total_sessions }}</h3>
        <p>Sessions</p>
    </div>
    
    <div class="card">
        <div class="card-icon bg-secondary">
            <i class="fas fa-exclamation-circle"></i>
        </div>
        <h3>{{ pending_requests }}</h3>
        <p>Pending Requests</p>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="table-container">
            <h2>Recent Users</h2>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Username</th>
                        <th>Type</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in recent_users %}
                    <tr>
                        <td>{{ user.name }}</td>
                        <td>{{ user.username }}</td>
                        <td>
                            <span class="badge badge-{{ 'primary' if user.user_type == 'admin' else 'success' if user.user_type == 'lecturer' else 'info' }}">
                                {{ user.user_type|title }}
                            </span>
                        </td>
                        <td>{{ user.created_at.strftime('%Y-%m-%d') }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <a href="{{ url_for('admin_users') }}" class="btn btn-primary mt-3">View All Users</a>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="table-container">
            <h2>Recent Courses</h2>
            <table>
                <thead>
                    <tr>
                        <th>Code</th>
                        <th>Name</th>
                        <th>Lecturer</th>
                        <th>Students</th>
                    </tr>
                </thead>
                <tbody>
                    {% for course in recent_courses %}
                    <tr>
                        <td>{{ course.code }}</td>
                        <td>{{ course.name }}</td>
                        <td>{{ course.lecturer.user.name }}</td>
                        <td>{{ course.students|length }}/{{ course.max_capacity }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <a href="{{ url_for('admin_courses') }}" class="btn btn-primary mt-3">View All Courses</a>
        </div>
    </div>
</div>

<div class="quick-actions mt-4">
    <h2>Quick Actions</h2>
    <div class="action-buttons">
        <a href="{{ url_for('admin_create_user') }}" class="btn btn-success">
            <i class="fas fa-user-plus"></i> Add New User
        </a>
        <a href="{{ url_for('admin_create_course') }}" class="btn btn-success">
            <i class="fas fa-book-medical"></i> Create Course
        </a>
        <a href="{{ url_for('admin_import_users') }}" class="btn btn-info">
            <i class="fas fa-file-import"></i> Import Users
        </a>
        <a href="{{ url_for('admin_removal_requests') }}" class="btn btn-warning">
            <i class="fas fa-clipboard-list"></i> Review Requests
        </a>
        <a href="{{ url_for('admin_reports') }}" class="btn btn-primary">
            <i class="fas fa-chart-bar"></i> View Reports
        </a>
    </div>
</div>
{% endblock %}